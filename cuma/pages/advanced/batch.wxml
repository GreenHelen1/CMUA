<view class="container">
  <view class="header">
    <text class="title">批量处理图片</text>
    <text class="progress">{{currentIndex}}/{{totalImages}}</text>
  </view>

  <view class="image-list">
    <block wx:for="{{processedImages}}" wx:key="index">
      <view class="image-item {{item.status}}">
        <image 
          src="{{item.status === 'completed' ? item.processedPath : item.originalPath}}"
          mode="aspectFill"
          bindtap="onPreviewImage"
          data-index="{{index}}"
        />
        <view class="image-status">
          <text wx:if="{{item.status === 'pending'}}">等待处理</text>
          <text wx:elif="{{item.status === 'processing'}}">处理中</text>
          <text wx:elif="{{item.status === 'completed'}}">处理完成</text>
          <text wx:elif="{{item.status === 'failed'}}">处理失败</text>
        </view>
        <view class="image-actions" wx:if="{{item.status === 'completed'}}">
          <button 
            class="save-btn" 
            size="mini" 
            bindtap="onSaveImage" 
            data-index="{{index}}"
          >保存到相册</button>
        </view>
      </view>
    </block>
  </view>

  <view class="loading" wx:if="{{processing}}">
    <view class="loading-text">正在处理图片...</view>
  </view>
</view> 